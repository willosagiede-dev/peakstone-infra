[general]
host = "0.0.0.0"
port = 6432
log_level = "info"

# Transaction pool for PostgREST (disable prepared statements there)
[pools.peakstone_tx]
pool_mode = "transaction"
default_role = "primary"
query_parser_enabled = false

[pools.peakstone_tx.users."app_user"]
# Replace with md5(password + username), prefixed with "md5"
password = "md5__FILL_ME__"

# Session pool for Hasura (keeps prepared statements)
[pools.peakstone_session]
pool_mode = "session"
default_role = "primary"
query_parser_enabled = false

[pools.peakstone_session.users."app_user"]
password = "md5__FILL_ME__"

# Primary server (add replicas later)
[[pools.peakstone_tx.servers]]
host = "postgres"
port = 5432
role = "primary"

[[pools.peakstone_session.servers]]
host = "postgres"
port = 5432
role = "primary"
